function callbackSaveSuccess(){document.location="View.aspx?SPAppWebUrl="+appWebUrl+"&listName="+listName+"&SPHostUrl="+hostWebUrl}function callbackSaveFail(n,t){showMsg(t.get_message())}function createForm(n){var t="<div class='form-horizontal'>";$.each(listNames.lists,function(i,r){if(r.listName==n)return $.each(r.fields,function(n,i){t+="<div class='form-group'>";t+="<label for='"+i.fieldInternalName+"' class='col-sm-2 control-label'>"+i.fieldDisplayName+"<\/label>";t+="<div class='col-sm-10'>";i.fieldType=="Note"?t+="<textarea width='100%' rows='5' data='field' class='form-control' id='"+i.fieldInternalName+"'/>":i.fieldType=="URL"?(t+="<div class='form-group'>",t+="<div class='col-sm-5'><label>Url: <\/label><input type='text' class='form-control' onchange='updateUrl(\""+i.fieldInternalName+"\")' id='"+i.fieldInternalName+"_url' placeholder='http://www.google.com'/><\/div>",t+="<div class='col-sm-5'><label>Title: <\/label><input type='text' class='form-control' onchange='updateUrl(\""+i.fieldInternalName+"\")' id='"+i.fieldInternalName+"_description' placeholder='Google'/><\/div>",t+="<input type='hidden' data='field' class='form-control' id='"+i.fieldInternalName+"'/>",t+="<\/div>"):t+="<input type='text' data='field' class='form-control' id='"+i.fieldInternalName+"'/>";i.fieldType=="URL";t+="<\/div>";t+="<\/div>"}),!1});t+="<\/div>";$("#listForm").html(t)}var listName=decodeURIComponent(getQueryStringParameter("listName"));$(document).ready(function(){clearMsg();objClient=new SPClient;objClient.consoleLog(!0);$("#spanListName").text(listName);createForm(listName);$("#save").click(function(){var t=[],n={},i;$("#");$.each($("input[data='field'], textarea[data='field']"),function(i,r){n={};n.fieldName=$(r).attr("id");n.fieldValue=$(r).val();t.push(n)});i={data:t};objClient.createOrUpdateListItem(listName,0,i,callbackSaveSuccess,callbackSaveFail)});$("#cancel").click(function(){document.location="View.aspx?SPAppWebUrl="+appWebUrl+"&listName="+listName+"&SPHostUrl="+hostWebUrl})})