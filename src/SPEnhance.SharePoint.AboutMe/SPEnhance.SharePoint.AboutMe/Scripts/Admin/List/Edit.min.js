function callbackListDataSuccess(n){createForm(listName,n)}function callbackListDataFail(n){showMsg(n)}function callbackSaveSuccess(){document.location="View.aspx?SPAppWebUrl="+appWebUrl+"&listName="+listName+"&SPHostUrl="+hostWebUrl}function callbackSaveFail(n,t){showMsg(t.get_message())}function createForm(n,t){console.log(t);var i="<div class='form-horizontal'>";$.each(listNames.lists,function(r,u){if(u.listName==n)return console.log(u.listName+" "+JSON.stringify(u.fields)),$.each(u.fields,function(n,r){i+="<div class='form-group'>";console.log(r.fieldInternalName);i+="<label for='"+r.fieldInternalName+"' class='col-sm-2 control-label'>"+r.fieldDisplayName+"<\/label>";i+="<div class='col-sm-10'>";r.fieldType=="Note"?i+="<textarea fieldType='Note' width='100%' rows='5' data='field' class='form-control' id='"+r.fieldInternalName+"'>"+t[0][r.fieldInternalName]+"<\/textarea>":r.fieldType=="URL"?(i+="<div class='form-group'>",i+="<div class='col-sm-5'><label>Url: <\/label><input type='text' class='form-control' onchange='updateUrl(\""+r.fieldInternalName+"\")' id='"+r.fieldInternalName+"_url' value='"+t[0][r.fieldInternalName].url+"' placeholder='http://www.google.com'/><\/div>",i+="<div class='col-sm-5'><label>Title: <\/label><input type='text' class='form-control' onchange='updateUrl(\""+r.fieldInternalName+"\")' id='"+r.fieldInternalName+"_description' value='"+t[0][r.fieldInternalName].description+"' placeholder='Google'/><\/div>",i+="<input type='hidden' data='field' class='form-control' id='"+r.fieldInternalName+"' value='"+t[0][r.fieldInternalName].url+", "+t[0][r.fieldInternalName].description+"'/>",i+="<\/div>"):i+="<input type='text' data='field' class='form-control' id='"+r.fieldInternalName+"' value='"+t[0][r.fieldInternalName]+"'/>";i+="<\/div>";i+="<\/div>"}),!1});i+="<\/div>";$("#listForm").html(i)}var listName=decodeURIComponent(getQueryStringParameter("listName")),listItemId=decodeURIComponent(getQueryStringParameter("listItemId"));$(document).ready(function(){clearMsg();objClient=new SPClient;objClient.consoleLog(!0);$("#spanListName").text(listName);var n="<View><Query><Where><Eq><FieldRef Name='ID'/><Value Type='Number'>"+listItemId+"<\/Value><\/Eq><\/Where><\/Query><\/View>";objClient.getListData(listName,"ID,"+getFieldsByListName(listName),n,callbackListDataSuccess,callbackListDataFail);$("#save").click(function(){var i=[],n={},t;$.each($("input[data='field'], textarea[data='field']"),function(t,r){n={};n.fieldName=$(r).attr("id");console.log($(r).attr("fieldType")+" "+$(r).val());n.fieldValue=$(r).val();i.push(n)});t={data:i};console.log(JSON.stringify(t));objClient.createOrUpdateListItem(listName,listItemId,t,callbackSaveSuccess,callbackSaveFail)});$("#cancel").click(function(){document.location="View.aspx?SPAppWebUrl="+appWebUrl+"&listName="+listName+"&SPHostUrl="+hostWebUrl})})