function callbackListDataSuccess(n,t,i,r,u){createForm(n,i,u)}function callbackListDataFail(n){showMsg(n)}function callbackSaveSuccess(){document.location="View.aspx?SPAppWebUrl="+appWebUrl+"&listName="+listName+"&SPHostUrl="+hostWebUrl}function callbackSaveFail(n,t){showMsg(t.get_message())}function createForm(n,t,i){consoleLog(t);var r="<div class='form-horizontal'>";angular.forEach(listNames.lists,function(n){if(n.listName==i)return consoleLog(n.listName+" "+JSON.stringify(n.fields)),angular.forEach(n.fields,function(n){if(r+="<div class='form-group'>",consoleLog(n.fieldInternalName),r+="<label for='"+n.fieldInternalName+"' class='col-sm-2 control-label'>"+n.fieldDisplayName+"<\/label>",r+="<div class='col-sm-10'>",n.fieldType=="Note")r+="<textarea ng-model='formData."+n.fieldInternalName+"' fieldType='Note' width='100%' rows='5' data='field' class='form-control' id='"+n.fieldInternalName+"' ng-init='formData."+n.fieldInternalName+'="'+t[0][n.fieldInternalName]+"\"'><\/textarea>";else if(n.fieldType=="URL"){var i=t[0][n.fieldInternalName]==null?"":t[0][n.fieldInternalName].url,u=t[0][n.fieldInternalName]==null?"":t[0][n.fieldInternalName].description;r+="<div class='form-group'>";r+="<div class='col-sm-5'><label>Url: <\/label><input ng-model='hyperlink.url' ng-change='formData."+n.fieldInternalName+"=hyperlink.url.length > 0 ? (hyperlink.url + \", \" + hyperlink.description) : \"\"' type='text' class='form-control' id='"+n.fieldInternalName+"_url' ng-init='hyperlink.url=\""+i+"\"' placeholder='http://www.google.com'/><\/div>";r+="<div class='col-sm-5'><label>Title: <\/label><input ng-model='hyperlink.description' ng-change='formData."+n.fieldInternalName+"=hyperlink.description.length > 0 ? (hyperlink.url + \", \" + hyperlink.description) : \"\"' type='text' class='form-control' id='"+n.fieldInternalName+"_description' ng-init='hyperlink.description=\""+u+"\"' placeholder='Google'/><\/div>";r+="<input ng-model='formData."+n.fieldInternalName+"' type='hidden' data='field' class='form-control' id='"+n.fieldInternalName+"' ng-init='formData."+n.fieldInternalName+'="'+i+", "+u+"\"'/>";r+="<\/div>"}else r+="<input ng-model='formData."+n.fieldInternalName+"' type='text' data='field' class='form-control' id='"+n.fieldInternalName+"' ng-init='formData."+n.fieldInternalName+'="'+t[0][n.fieldInternalName]+"\"'/>";r+="<\/div>";r+="<\/div>"}),!1});r+="<\/div>";n.listForm=r}var listName=decodeURIComponent(getQueryStringParameter("listName")),listItemId=decodeURIComponent(getQueryStringParameter("listItemId"));resumeBuilderApp.controller("EditListDataController",["$scope","sharePointService",function(n,t){clearMsg();n.listName=listName;n.formData={};var i="<View><Query><Where><Eq><FieldRef Name='ID'/><Value Type='Number'>"+listItemId+"<\/Value><\/Eq><\/Where><\/Query><\/View>";objClient.getListData(n,t,listName,"ID,"+getFieldsByListName(listName),i,callbackListDataSuccess,callbackListDataFail);n.save=function(){var r,i,u;consoleLog("in save");r=[];i={};angular.forEach(n.formData,function(n,t){i={};i.fieldName=t;i.fieldValue=n;r.push(i)});u={data:r};consoleLog(u);objClient.createOrUpdateListItem(n,t,listName,listItemId,u,callbackSaveSuccess,callbackSaveFail)};n.cancel=function(){document.location="View.aspx?SPAppWebUrl="+appWebUrl+"&listName="+listName+"&SPHostUrl="+hostWebUrl}}])